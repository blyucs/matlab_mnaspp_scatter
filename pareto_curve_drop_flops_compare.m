clear
close all
%二维散点图
% 82 baseline
% pkt_dir ='Y:\lvbo_dir\Multi-objective-NAS-for-efficient-PP\src\ckpt\_search_celebA_search_20200731T1320\' 
pareto_para = []
pareto_flops = []
pareto_delay = []
pkt_dir = []

%82 flops =-0.6
pkt_dir_n = 'Y:\lvbo_dir\Multi-objective-NAS-for-efficient-PP\src\ckpt\_search_celebA_search_20200803T2355\'
pareto_n = [416,551,599,579,928,46]

%19 flops add drop =-0.6
pkt_dir_6 = 'X:\00_lvbo_dir\01_code\Multi-objective-NAS-for-efficient-PP\src\ckpt\_search_celebA_search_20200804T2242\'
pareto_6 = [908,778,976,829,950,810,762,805,653]

data = []
o_reward = []
epoch = []
params = []
delay = []
flops = []

data_n= xlsread([pkt_dir_n,'genotypes.csv'])
o_reward_n= data_n(1:1000,1)
reward_n = data_n(1:1000,2)
epoch_n = data_n(1:1000,3)
params_n = data_n(1:1000,4)
delay_n = data_n(1:1000,5)
flops_n = data_n(1:1000,6)

data_6= xlsread([pkt_dir_6,'genotypes.csv'])
o_reward_6= data_6(1:1000,1)
reward_6 = data_6(1:1000,2)
epoch_6 = data_6(1:1000,3)
params_6 = data_6(1:1000,4)
delay_6 = data_6(1:1000,5)
flops_6 = data_6(1:1000,6)

S = 100; %坐标点的大小/尺寸

% 创建 figure
figure1 = figure('WindowState','maximized');
% 创建 axes
axes1 = axes('Parent',figure1);
hold(axes1,'on');

% no drop
plot(o_reward_n(pareto_n),params_n(pareto_n),'linestyle','-', 'color', 'k', 'linewidth',3)
plot(o_reward_6(pareto_6),params_6(pareto_6),'linestyle','--', 'color', 'r', 'linewidth',3)
% plot(o_reward_3(pareto_3),params_3(pareto_3),'linestyle','-', 'color', 'g', 'linewidth',2)
% plot(o_reward_b(pareto_b),params_b(pareto_b),'linestyle','-', 'color', 'b', 'linewidth',2)

%no drop
scatter(o_reward_n(pareto_n),params_n(pareto_n),S,epoch_n(pareto_n),'^','MarkerFaceColor','flat','MarkerEdgeColor',[0 0 0]);
scatter(o_reward_6(pareto_6),params_6(pareto_6),S,epoch_6(pareto_6),'MarkerFaceColor','flat','MarkerEdgeColor',[0 0 0]);
% scatter(o_reward_3(pareto_3),params_3(pareto_3),S,epoch_3(pareto_3),'MarkerFaceColor','flat','MarkerEdgeColor',[0 0 0]);
% scatter(o_reward_b(pareto_b),params_b(pareto_b),S,epoch_6(pareto_b),'MarkerFaceColor','flat','MarkerEdgeColor',[0 0 0]);

% 创建 ylabel
xlabel('Accuracy(Original evaluation of the architectures)','FontSize',30);

% 创建 xlabel
ylabel('FLOPs(G)','FontSize',30);

% % 取消以下行的注释以保留坐标区的 X 范围
xlim(axes1,[0.3,0.7])
% 取消以下行的注释以保留坐标区的 Y 范
%     ylim(axes1,[0.2 1.2]);
ylim(axes1,[0.15,0.5])

% lg = legend('Flops -0.6','Flops -0.3','Baseline')
lg = legend('    Without piece-wise reward-penalty(coefficient: -0.6)', '    With piece-wise reward-penalty(coefficient: -0.6)')
set(lg,...
    'Position',[0.151345497654336 0.789253323697037 0.517708318696047 0.108627855529904],...
    'FontSize',30);

grid(axes1,'on');
% 设置其余坐标区属性
set(axes1,'CLim',[0 1000], 'FontSize', 30, 'Colormap',...
    [0.941176474094391 0.941176474094391 0.941176474094391;0.926237165927887 0.926237165927887 0.926237165927887;0.911297857761383 0.911297857761383 0.911297857761383;0.896358549594879 0.896358549594879 0.896358549594879;0.881419241428375 0.881419241428375 0.881419241428375;0.866479933261871 0.866479933261871 0.866479933261871;0.851540625095367 0.851540625095367 0.851540625095367;0.836601316928864 0.836601316928864 0.836601316928864;0.82166200876236 0.82166200876236 0.82166200876236;0.806722700595856 0.806722700595856 0.806722700595856;0.791783392429352 0.791783392429352 0.791783392429352;0.776844084262848 0.776844084262848 0.776844084262848;0.761904776096344 0.761904776096344 0.761904776096344;0.74696546792984 0.74696546792984 0.74696546792984;0.732026159763336 0.732026159763336 0.732026159763336;0.717086851596832 0.717086851596832 0.717086851596832;0.702147543430328 0.702147543430328 0.702147543430328;0.687208235263824 0.687208235263824 0.687208235263824;0.672268927097321 0.672268927097321 0.672268927097321;0.657329618930817 0.657329618930817 0.657329618930817;0.642390310764313 0.642390310764313 0.642390310764313;0.627451002597809 0.627451002597809 0.627451002597809;0.612511694431305 0.612511694431305 0.612511694431305;0.597572386264801 0.597572386264801 0.597572386264801;0.582633078098297 0.582633078098297 0.582633078098297;0.567693769931793 0.567693769931793 0.567693769931793;0.552754461765289 0.552754461765289 0.552754461765289;0.537815153598785 0.537815153598785 0.537815153598785;0.522875845432281 0.522875845432281 0.522875845432281;0.507936537265778 0.507936537265778 0.507936537265778;0.492997199296951 0.492997199296951 0.492997199296951;0.478057891130447 0.478057891130447 0.478057891130447;0.463118582963943 0.463118582963943 0.463118582963943;0.44817927479744 0.44817927479744 0.44817927479744;0.433239966630936 0.433239966630936 0.433239966630936;0.418300658464432 0.418300658464432 0.418300658464432;0.403361350297928 0.403361350297928 0.403361350297928;0.388422042131424 0.388422042131424 0.388422042131424;0.37348273396492 0.37348273396492 0.37348273396492;0.358543425798416 0.358543425798416 0.358543425798416;0.343604117631912 0.343604117631912 0.343604117631912;0.328664809465408 0.328664809465408 0.328664809465408;0.313725501298904 0.313725501298904 0.313725501298904;0.298786193132401 0.298786193132401 0.298786193132401;0.283846884965897 0.283846884965897 0.283846884965897;0.268907576799393 0.268907576799393 0.268907576799393;0.253968268632889 0.253968268632889 0.253968268632889;0.239028945565224 0.239028945565224 0.239028945565224;0.22408963739872 0.22408963739872 0.22408963739872;0.209150329232216 0.209150329232216 0.209150329232216;0.194211021065712 0.194211021065712 0.194211021065712;0.179271712899208 0.179271712899208 0.179271712899208;0.164332404732704 0.164332404732704 0.164332404732704;0.1493930965662 0.1493930965662 0.1493930965662;0.134453788399696 0.134453788399696 0.134453788399696;0.119514472782612 0.119514472782612 0.119514472782612;0.104575164616108 0.104575164616108 0.104575164616108;0.089635856449604 0.089635856449604 0.089635856449604;0.0746965482831001 0.0746965482831001 0.0746965482831001;0.0597572363913059 0.0597572363913059 0.0597572363913059;0.044817928224802 0.044817928224802 0.044817928224802;0.029878618195653 0.029878618195653 0.029878618195653;0.0149393090978265 0.0149393090978265 0.0149393090978265;0 0 0]);
% 创建 colorbar
c_bar = colorbar('peer',axes1, 'FontSize', 30);
ylabel(c_bar, 'Order of Search Results(Iterations)', 'FontSize', 30)

% 进入数据游标选取模式，游标的回调函数更新为自定义的fun_NewCallbackForScatter3
hd = datacursormode;
hd.UpdateFcn = @(obj,event_obj) NewCallBackFunc(obj,event_obj);

